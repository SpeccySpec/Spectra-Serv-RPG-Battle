<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="text/plain" href="https://raw.githubusercontent.com/daneden/animate.css/master/animate.css">
</head>
<title>RPG Battle</title>
  
<style>
/*Style the Container*/
#container {
  width: 400px;
  min-height: 10vh;
  margin: 0 auto;
  background: rgb(233, 233, 233);
  -webkit-box-shadow: 0px 0px 23px 0px rgba(0,0,0,0.75);
  -moz-box-shadow: 0px 0px 23px 0px rgba(0,0,0,0.75);
  box-shadow: 0px 0px 23px 0px rgba(0,0,0,0.75);
	padding:9px 23px;
}

#container .element {
    padding: 20px 25px;
}

#container .element {
    background: rgb(52, 110, 235);
}

#container .element:nth-child(even) {
    background: rgb(52, 110, 235);
}

//*Style the background*//
#background {
  position: fixed;
  left: 50%;
  top: 50%;
  min-width: 100%;
  min-height: 100%;
  -webkit-transform: translate(-50%,-50%);
  -moz-transform: translate(-50%,-50%);
  -ms-transform: translate(-50%,-50%);
  transform: translate(-50%,-50%);
  z-index: -2;
}

/* We contain the Particles. */
#particles {
  z-index: -1;
  position: fixed;
  width: 100%;
  height: 100%;
  background-color: var(--dark-bg);
  background-image: url("");
  background-repeat: no-repeat;
  background-size: 20%;
  background-position: 50% 50%;
}

/* We get the particle count. */
.count-particles {
  background: var(--black);
  position: absolute;
  top: 3.024rem;
  left: 0;
  width: 5.04rem;
  color: var(--select);
  font-size: .8em;
  text-align: left;
  text-indent: 0.252rem;
  line-height: 0.882rem;
  padding-bottom: 0.126rem;
  font-family: Helvetica, Arial, sans-serif;
  font-weight: bold;
}

.js-count-particles {
  font-size: 1.1em;
}

#stats, .count-particles {
  -webkit-user-select: none;
  margin-top: 0.315rem;
  margin-left: 0.315rem;
}

#stats {
  border-radius: 0.189rem 0.189rem 0 0;
  overflow: hidden;
}

.count-particles {
  border-radius: 0 0 0.189rem 0.189rem;
}
	
/*Button Styles*/
.atkbutton {
    appearance: button;
    color: -internal-light-dark(buttontext, rgb(255, 125, 74));
    background-color: -internal-light-dark(rgb(255, 72, 0), rgb(89, 15, 0));
    border-color: -internal-light-dark(rgb(118, 118, 118), rgb(195, 195, 195));
    -webkit-writing-mode: horizontal-tb !important;
    text-rendering: auto;
    letter-spacing: normal;
    word-spacing: normal;
    text-transform: none;
    text-indent: 0px;
    text-shadow: none;
    display: inline-block;
    text-align: center;
    align-items: flex-start;
    box-sizing: border-box;
    margin: 0em;
    font: 400 13.3333px Arial;
    padding: 1px 6px;
    border-width: 2px;
    border-style: outset;
    border-image: initial;
    cursor: crosshair;
}
	
.superatkbutton {
    appearance: button;
    color: -internal-light-dark(buttontext, rgb(255, 244, 117));
    background-color: -internal-light-dark(rgb(255, 235, 0), rgb(168, 123, 0));
    border-color: -internal-light-dark(rgb(118, 118, 118), rgb(195, 195, 195));
    -webkit-writing-mode: horizontal-tb !important;
    text-rendering: auto;
    letter-spacing: normal;
    word-spacing: normal;
    text-transform: none;
    text-indent: 0px;
    text-shadow: none;
    display: inline-block;
    text-align: center;
    align-items: flex-start;
    box-sizing: border-box;
    margin: 0em;
    font: 400 13.3333px Arial;
    padding: 1px 6px;
    border-width: 2px;
    border-style: outset;
    border-image: initial;
    cursor: cell;
}
	
.multiatkbutton {
    appearance: button;
    color: -internal-light-dark(buttontext, rgb(143, 248, 255));
    background-color: -internal-light-dark(rgb(0, 221, 255), rgb(0, 101, 163));
    border-color: -internal-light-dark(rgb(118, 118, 118), rgb(195, 195, 195));
    -webkit-writing-mode: horizontal-tb !important;
    text-rendering: auto;
    letter-spacing: normal;
    word-spacing: normal;
    text-transform: none;
    text-indent: 0px;
    text-shadow: none;
    display: inline-block;
    text-align: center;
    align-items: flex-start;
    box-sizing: border-box;
    margin: 0em;
    font: 400 13.3333px Arial;
    padding: 1px 6px;
    border-width: 2px;
    border-style: outset;
    border-image: initial;
    cursor: move;
}

/* Particles */
canvas { display: block; vertical-align: bottom; }
#particles-js { z-index: -100; position: fixed; width: 100%; height: 100%; background-color: var(--dark-bg); background-image: url(""); background-repeat: no-repeat; background-size: 20%; background-position: 50% 50%; }
.count-particles { background: var(--black); position: absolute; top: 3.024rem; left: 0px; width: 5.04rem; color: var(--select); font-size: 0.8em; text-align: left; text-indent: 0.252rem; line-height: 0.882rem; padding-bottom: 0.126rem; font-family: Helvetica, Arial, sans-serif; font-weight: bold; }
.js-count-particles { font-size: 1.1em; }
#stats, .count-particles { user-select: none; margin-top: 0.315rem; margin-left: 0.315rem; }
#stats { border-radius: 0.189rem 0.189rem 0px 0px; overflow: hidden; }
.count-particles { border-radius: 0px 0px 0.189rem 0.189rem; }
</style>
  
<body style="background-color:gray;">
<!-- Store some Variables. -->
<div id="NumStore"></div>

<!-- Background (Not working) -->
<!-- <img  id="background" src="background.png" alt=""> -->
	
<!-- particles.js container -->
<div id="particles-js"></div>
<!-- particles.js driver -->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

<center>
<div id="container">
<h1>DnD damage generator!</h1>
<p>A tool for reducing battle time</p>
	
<p>Presets:
Soon</p>
<!--<select name="select" id="select">
  <option value="none">None</option>
</select></p>
<button onclick="loadPreset()">Load</button> -->
                                                                                   <hr />
<!--<p>Character Name:
<input type="text" id="charname" name="charactername"></p>-->

<p>Input Strength:
<input type="number" id="strength" name="atk" min="1" max="10"></p>
	
<p>Input Accuracy:
<input type="number" id="accuracy" name="accuracy" min="1" max="10"></p>

<p>Input Weapon Proficiency:
<input type="number" id="weapon" name="weap" min="1" max="10"></p>
	
<p>Input Stat Modifiers:
<input type="number" id="statmod" name="stats" min="-6" max="6"></p>
  
<p>Attack Element:
<select name="element" id="element">
  <option value="normal">Normal</option>
  <option value="fighting">Fighting</option>
  <option value="sharp">Sharp</option>
  <option value="blunt">Blunt</option>
  <option value="fire">Fire</option>
  <option value="water">Water</option>
  <option value="ice">Ice</option>
  <option value="electric">Electric</option>
  <option value="wind">Wind</option>
  <option value="geokinesis">Geokinesis</option>
  <option value="grass">Grass</option>
  <option value="psychic">Psychic</option>
  <option value="dark">Dark</option>
  <option value="curse">Curse</option>
  <option value="poison">Poison</option>
  <option value="metal">Metal</option>
  <option value="light">Light</option>
  <option value="ki">Ki</option>
  <option value="nuclear">Nuclear</option>
  <option value="stardust">Stardust</option>
  <option value="mystical">Mystical</option>
</select></p>
	
<p>Enemy HP:
<input type="number" id="opphp" name="hp" min="1" max="1000"></p>
	
<p>Enemy Element:
<select name="enemyelement" id="oppelement">
  <option value="normal">Normal</option>
  <option value="fighting">Fighting</option>
  <option value="fire">Fire</option>
  <option value="water">Water</option>
  <option value="ice">Ice</option>
  <option value="electric">Electric</option>
  <option value="wind">Wind</option>
  <option value="rock">Rock</option>
  <option value="grass">Grass</option>
  <option value="psychic">Psychic</option>
  <option value="dark">Dark</option>
  <option value="curse">Curse</option>
  <option value="metal">Metal</option>
  <option value="light">Light</option>
  <option value="poison">Poison</option>
  <option value="stardust">Stardust</option>
  <option value="mystical">Mystical</option>
</select></p>

<p>Enemy Defense:
<input type="number" id="defense" name="def" min="1" max="50"></p>
	
<p>Enemy Agility:
<input type="number" id="agility" name="agl" min="1" max="20"></p>
	
<p>Under Status Effect:
<select name="statuseffect" id="status">
  <option value="none">None</option>
  <option value="burn">Burn</option>
  <option value="freeze">Freeze</option>
  <option value="poison">Poison</option>
  <option value="bleed">Bleeding</option>
  <option value="paralyze">Paralyze</option>
  <option value="dizziness">Dizziness</option>
  <option value="fear">Fear</option>
  <option value="brainwashed">Brainwashed</option>
  <option value="radiation">Radiation</option>
  <option value="stardust">Stardust</option>
</select></p>

<p>
<button class="atkbutton" onclick="regularAttack()">Regular Attack!</button>
<button class="multiatkbutton" onclick="multiAttack()">Multi Attack!</button>
</p>
	
<p>
<button class="superatkbutton" onclick="superAttack()">Super Attack!</button>
<button class="superatkbutton" onclick="ultraSuperAttack()">Ultra Super Attack!</button>
</p>

<p>
<button class="atkbutton" onclick="randChance()">Random Chance</button>
</p>

<p id="damage"></p><p id="critical?"></p>
<p id="secondary"></p>

	<p>Make notes here if you need to.</p>
<input type="text" id="1stnote" name="1stnote"><input type="text" id="2ndnote" name="2ndnote">
</center>
</div>

<script>
function typeEffect(atkelement, enemyelement) {
  var effective = false
  var resist = false
  if ((atkelement == "sharp") || (atkelement == "blunt")) {
    if ((enemyelement == "ice") || (enemyelement == "grass")) {
      effective = true
    }
    if ((enemyelement == "metal") || (enemyelement == "curse")) {
      resist = true
    }
  } else if (atkelement == "fire") {
    if ((enemyelement == "ice") || (enemyelement == "grass")) {
      effective = true
    }
    if ((enemyelement == "fire") || (enemyelement == "rock")) {
      resist = true
    }
  } else if (atkelement == "water") {
    if ((enemyelement == "fire") || (enemyelement == "rock")) {
      effective = true
    }
    if ((enemyelement == "grass") || (enemyelement == "poison")) {
      resist = true
    }
  } else if (atkelement == "ice") {
    if ((enemyelement == "grass") || (enemyelement == "water")) {
      effective = true
    }
    if ((enemyelement == "ice") || (enemyelement == "metal")) {
      resist = true
    }
  } else if (atkelement == "electric") {
    if (enemyelement == "water") {
      effective = true
    }
    if ((enemyelement == "rock") || (enemyelement == "metal")) {
      resist = true
    }
  } else if (atkelement == "geokinesis") {
    if ((enemyelement == "ice") || (enemyelement == "electric")) {
      effective = true
    }
    if ((enemyelement == "rock") || (enemyelement == "metal")) {
      resist = true
    }
  } else if (atkelement == "fighting") {
    if ((enemyelement == "ice") || (enemyelement == "rock")) {
      effective = true
    }
    if ((enemyelement == "psychic") || (enemyelement == "grass")) {
      resist = true
    }
  } else if (atkelement == "psychic") {
    if ((enemyelement == "fighting") || (enemyelement == "poison")) {
      effective = true
    }
    if ((enemyelement == "light") || (enemyelement == "curse")) {
      resist = true
    }
  } else if (atkelement == "dark") {
    if ((enemyelement == "light") || (enemyelement == "psychic")) {
      effective = true
    }
    if ((enemyelement == "fighting") || (enemyelement == "metal")) {
      resist = true
    }
  } else if (atkelement == "light") {
    if ((enemyelement == "dark") || (enemyelement == "curse")) {
      effective = true
    }
    if ((enemyelement == "metal") || (enemyelement == "psychic")) {
      resist = true
    }
  } else if (atkelement == "poison") {
    if ((enemyelement == "water") || (enemyelement == "grass")) {
      effective = true
    }
    if ((enemyelement == "rock") || (enemyelement == "metal")) {
      resist = true
    }
  } else if (atkelement == "metal") {
    if ((enemyelement == "ice") || (enemyelement == "rock")) {
      effective = true
    }
    if ((enemyelement == "water") || (enemyelement == "electric")) {
      resist = true
    }
  } else if (atkelement == "curse") {
    if ((enemyelement == "light") || (enemyelement == "psychic")) {
      effective = true
    }
    if ((enemyelement == "dark") || (enemyelement == "fighting")) {
      resist = true
    }
  }
	
  if (effective == true) {
    return "effective"
  } else if ((resist == true) || (atkelement == enemyelement)) {
    return "resist"
  } else {
    return "none"
  }
}
	
function getChance(chance) {
	var chnce = (chance/100)
	var targ = Math.random()
	if (targ >= chnce) {
		return true
	} else {
		return false
	}
}

function regularAttack() {
  document.getElementById("damage").innerHTML = "";
  document.getElementById("secondary").innerHTML = "";
  var strength = document.getElementById("strength").value;
  var weapon = document.getElementById("weapon").value;
  var defense = document.getElementById("defense").value;
  var basedmg = Math.floor(Math.random() * (30 - 1 + 1) + 1);
  var atkelement = document.getElementById("element").value
  var enemyelement = document.getElementById("oppelement").value
  var crit = getChance(85);
  // Occasional critical hits
  if (crit == true) {
     document.getElementById("critical?").innerHTML = "(Critical)";
     basedmg = Math.floor(basedmg + (basedmg / 2));
  } else {
     document.getElementById("critical?").innerHTML = "";
  }
  // Some types have secondary effects.
  var effect = Math.random();
  if ((effect > 0.85) & (crit <= 0.85)) {
     if (atkelement == "sharp") {
        document.getElementById("secondary").innerHTML = "(Inflicted with Bleed)";
     } else if (atkelement == "fire") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Burn)";
     } else if (atkelement == "ice") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Freeze)";
     } else if (atkelement == "electric") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Paralysis)";
     } else if (atkelement == "poison") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Poison)";
     } else if (atkelement == "curse") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Fear)";
     }
  }
  // Nuclear does double damage.
  if (atkelement == "nuclear") {
    basedmg = Math.round(basedmg*2);
    document.getElementById("secondary").innerHTML = "(Inflicted with Radiation)";
  }
  // Now check for effective moves.
  var effective = typeEffect(atkelement, enemyelement)
  // Get results
  var result = Math.floor(basedmg + (strength/1) + (weapon/1) - defense);
  // Apply Status Effects to Attack
  var status = document.getElementById("status").value
  if ((status == "burn") || (status == "poison")) {
    result = (result/2)
  }
  if (status == "freeze") {
    var escapechance = Math.random();
    if (escapechance > 0.75) {
      document.getElementById("damage").innerHTML = "Escaped from the ice!";
      return false
    } else {
      document.getElementById("damage").innerHTML = "Frozen Solid!";
      return false
    }
  }
  var dodgechance = Math.random();
  dodgechance = dodgechance+(document.getElementById("agility").value/50);
  var accurate = (document.getElementById("accuracy").value/50);
  dodgechance = (dodgechance - accurate);
  var statuschance = Math.random();
  if (dodgechance < 0.95) {
    if (result < 1) {
      result = 1;
    }
    var statmod = document.getElementById("statmod").value
    if (statmod != 0) {
      result = (result + (statmod/2))
    }
    if (status == "brainwashed") {
      if (statuschance > 0.6) {
	 document.getElementById("damage").innerHTML = "The user damaged an ally by " + basedmg + " damage!";
	 return true
      }
    }
    if (effective == "effective") {
      result = (result*2)
      document.getElementById("damage").innerHTML = "The enemy took " + result + "↑ damage! (" + basedmg + " without modifiers)";
    } else if (effective == "resist") {
      result = (result/2)
      document.getElementById("damage").innerHTML = "The enemy took " + result + "↓ damage! (" + basedmg + " without modifiers)";
    } else {
      document.getElementById("damage").innerHTML = "The enemy took " + result + " damage! (" + basedmg + " without modifiers)";
    }
    document.getElementById("opphp").value = (document.getElementById("opphp").value - (result/1))
    return true
  } else {
    document.getElementById("damage").innerHTML = "It was dodged!";
    if (crit > 0.85) {
      document.getElementById("critical?").innerHTML = "(Missed crit :()";
    }
    return false
  }
}
	
function multiAttack() {
  document.getElementById("damage").innerHTML = "";
  document.getElementById("secondary").innerHTML = "";
  var strength = document.getElementById("strength").value;
  var weapon = document.getElementById("weapon").value;
  var defense = document.getElementById("defense").value;
  var list = [2, 2, 2, 2, 3, 3, 3, 4, 4, 5]; 
  var atkcount = list[Math.floor(Math.random() * (10 - 1 + 1) + 1)];
  if (atkcount == 2) {
     var atk1 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk2 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk3 = 0
     var atk4 = 0
     var atk5 = 0
  } else if (atkcount == 3) {
     var atk1 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk2 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk3 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk4 = 0
     var atk5 = 0
  } else if (atkcount == 4) {
     var atk1 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk2 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk3 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk4 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk5 = 0
  } else {
     var atk1 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk2 = Math.floor(Math.random() * (10 - 1 + 1) + 1);
     var atk3 = Math.floor(Math.random() * (11 - 1 + 1) + 1);
     var atk4 = Math.floor(Math.random() * (12 - 1 + 1) + 1);
     var atk5 = Math.floor(Math.random() * (13 - 1 + 1) + 1);
  }
  var totalatk = ((atk1/1)  + (atk2/1) + (atk3/1) + (atk4/1) + (atk5/1))
  var crit = Math.random();
  if (crit > 0.85) {
     document.getElementById("critical?").innerHTML = "(Critical)";
     atk1 = Math.floor((atk1/1) + (atk1 / 2));
     atk2 = Math.floor((atk2/1) + (atk2 / 2));
     atk3 = Math.floor((atk3/1) + (atk3 / 2));
     atk4 = Math.floor((atk4/1) + (atk4 / 2));
     atk5 = Math.floor((atk5/1) + (atk5 / 2));
  } else {
     document.getElementById("critical?").innerHTML = "";
  }
  var effect = Math.random();
  if ((effect > 0.85) & (crit <= 0.85)) {
     if (atkelement == "sharp") {
        document.getElementById("secondary").innerHTML = "(Inflicted with Bleed)";
     } else if (atkelement == "fire") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Burn)";
     } else if (atkelement == "ice") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Freeze)";
     } else if (atkelement == "electric") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Paralysis)";
     } else if (atkelement == "poison") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Poison)";
     } else if (atkelement == "curse") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Fear)";
     }
  }
  if (document.getElementById("element").value == "nuclear") {
    document.getElementById("secondary").innerHTML = "(Inflicted with Radiation)";
  }
  var effective = typeEffect(atkelement, enemyelement)
  var dodgechance = Math.random();
  dodgechance = dodgechance+(document.getElementById("agility").value/50);
  var accurate = (document.getElementById("accuracy").value/50);
  dodgechance = (dodgechance - accurate);
  if (dodgechance < 0.95) {
    if (atkcount == 2) {
      document.getElementById("damage").innerHTML = "The enemy took " + atk1 + " + " + atk2 + " damage! (" + totalatk + " total)";
    } else if (atkcount == 3) {
      document.getElementById("damage").innerHTML = "The enemy took " + atk1 + " + " + atk2 + " + " + atk3 + " damage! (" + totalatk + " total)";
    } else if (atkcount == 4) {
      document.getElementById("damage").innerHTML = "The enemy took " + atk1 + " + " + atk2 + " + " + atk3 + " + " + atk4 + " damage! (" + totalatk + " total)";
    } else {
      document.getElementById("damage").innerHTML = "The enemy took " + atk1 + " + " + atk2 + " + " + atk3 + " + " + atk4 + " + " + atk5 + " damage! (" + totalatk + " total)";
    }
  } else {
    document.getElementById("damage").innerHTML = "It was dodged!";
    if (crit > 0.85) {
      document.getElementById("critical?").innerHTML = "(Missed crit :()";
    }
  }
//if (document.getElementById("record").value == true) {
  document.getElementById("opphp").value = (document.getElementById("opphp").value - (totalatk/1))
//}
}
  
function superAttack() {
  document.getElementById("damage").innerHTML = "";
  document.getElementById("secondary").innerHTML = "";
  var strength = document.getElementById("strength").value;
  var weapon = document.getElementById("weapon").value;
  var defense = document.getElementById("defense").value;
  var basedmg = Math.floor(Math.random() * (80 - 1 + 1) + 1);
  var atkelement = document.getElementById("element").value
  var enemyelement = document.getElementById("oppelement").value
  var crit = Math.random();
  if (crit > 0.85) {
     document.getElementById("critical?").innerHTML = "(Critical)";
     basedmg = Math.floor(basedmg + (basedmg / 2));
  } else {
     document.getElementById("critical?").innerHTML = "";
  }
   // Some types have secondary effects.
  var effect = Math.random();
  if ((effect > 0.85) & (crit <= 0.85)) {
     if (atkelement == "sharp") {
        document.getElementById("secondary").innerHTML = "(Inflicted with Bleed)";
     } else if (atkelement == "fire") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Burn)";
     } else if (atkelement == "ice") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Freeze)";
     } else if (atkelement == "electric") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Paralysis)";
     } else if (atkelement == "poison") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Poison)";
     } else if (atkelement == "curse") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Fear)";
     }
  }
  // Nuclear does double damage.
  if (atkelement == "nuclear") {
    basedmg = Math.round(basedmg*2);
    document.getElementById("secondary").innerHTML = "(Inflicted with Radiation)";
  }
  // Now check for effective moves.
  var effective = typeEffect(atkelement, enemyelement)
  // Now get the result
  var result = Math.round(basedmg + (strength/1) + (weapon/1));
  var dodgechance = Math.random();
  dodgechance = dodgechance+(document.getElementById("agility").value/50);
  var accurate = (document.getElementById("accuracy").value/50);
  dodgechance = (dodgechance - accurate);
  if (dodgechance < 0.98) {
    var statmod = document.getElementById("statmod").value
    if (statmod != 0) {
      result = (result + (statmod/2))
    }
    if (result < 1) {
      result = 1;
    }
    if (effective == "effective") {
      result = (result*2)
      document.getElementById("damage").innerHTML = "The enemy took a heavy " + result + "↑ damage! (" + basedmg + " without modifiers)";
    } else if (effective == "resist") {
      result = (result/2)
      document.getElementById("damage").innerHTML = "The enemy took a heavy" + result + "↓ damage! (" + basedmg + " without modifiers)";
    } else {
      document.getElementById("damage").innerHTML = "The enemy took a heavy" + result + " damage! (" + basedmg + " without modifiers)";
    }
    document.getElementById("opphp").value = (document.getElementById("opphp").value - (result/1))
  } else {
    document.getElementById("damage").innerHTML = "It was dodged!";
    if (crit > 0.85) {
      document.getElementById("critical?").innerHTML = "(Missed crit :()";
    }
  }
}
	
function ultraSuperAttack() {
  document.getElementById("damage").innerHTML = "";
  document.getElementById("secondary").innerHTML = "";
  var strength = document.getElementById("strength").value;
  var weapon = document.getElementById("weapon").value;
  var defense = document.getElementById("defense").value;
  var basedmg = Math.floor(Math.random() * (120 - 1 + 1) + 1);
  var atkelement = document.getElementById("element").value
  var enemyelement = document.getElementById("oppelement").value
  var crit = Math.random();
  if (crit > 0.85) {
     document.getElementById("critical?").innerHTML = "(Critical)";
     basedmg = Math.floor(basedmg + (basedmg / 2));
  } else {
     document.getElementById("critical?").innerHTML = "";
  }
  // Some types have secondary effects.
  var effect = Math.random();
  if ((effect > 0.85) & (crit <= 0.85)) {
     if (atkelement == "sharp") {
        document.getElementById("secondary").innerHTML = "(Inflicted with Bleed)";
     } else if (atkelement == "fire") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Burn)";
     } else if (atkelement == "ice") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Freeze)";
     } else if (atkelement == "electric") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Paralysis)";
     } else if (atkelement == "poison") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Poison)";
     } else if (atkelement == "curse") {
       document.getElementById("secondary").innerHTML = "(Inflicted with Fear)";
     }
  }
  // Nuclear does double damage.
  if (atkelement == "nuclear") {
    basedmg = Math.round(basedmg*2);
    document.getElementById("secondary").innerHTML = "(Inflicted with Radiation)";
  }
  // Now check for effective moves.
  var effective = typeEffect(atkelement, enemyelement)
  // Now get the result.
  var result = Math.round(basedmg + (strength/1) + (weapon/1));
  var statmod = document.getElementById("statmod").value
  if (statmod != 0) {
    result = (result + (statmod/2))
  }
  if (result < 1) {
    result = 1;
  }
  if (effective == "effective") {
    result = (result*3)
    document.getElementById("damage").innerHTML = "The enemy took a wounding" + result + "↑ damage! (" + basedmg + " without modifiers)";
  } else if (effective == "resist") {
    result = (result/2)
    document.getElementById("damage").innerHTML = "The enemy took a heavy " + result + "↓ damage! (" + basedmg + " without modifiers)";
  } else {
    document.getElementById("damage").innerHTML = "The enemy took a severe" + result + " damage! (" + basedmg + " without modifiers)";
  }
  document.getElementById("opphp").value = (document.getElementById("opphp").value - (result/1))
}

function randChance() {
  var chance = Math.random();
  if (chance > 0.7) {
     document.getElementById("damage").innerHTML = "Returned True."
     return true
  } else {
     document.getElementById("damage").innerHTML = "Returned False."
     return false
  }
}
	
function setPreset() {
  var name = document.getElementById("charname").value;
  var strength = document.getElementById("strength").value;
  var weapon = document.getElementById("weapon").value;
  var defense = document.getElementById("defense").value;
  var values = {name, strength, weapon, defense};
  var sel = document.getElementById("select");
  var opt = document.createElement("option");
  opt.appendChild(document.createTextNode(name));
  opt.value = name;
  sel.appendChild(opt);
  if (localStorage.calltimes){
    localStorage.calltimes = Number(localStorage.calltimes)+1
  } else {
    localStorage.calltimes = 1
  }
  presets[Number(localStorage.calltimes)] = values
  if (localStorage.presets){
    localStorage.presets[Number(localStorage.calltimes)] = values
  } else {
    localStorage.presets = {}
    localStorage.presets[Number(localStorage.calltimes)] = values
  }
}

// Particles
particlesJS.load('particles-js', 'particles.json', function() {
  console.log('callback - particles.js config loaded');
});
</script>
</body>

